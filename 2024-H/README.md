# ğŸ§­ 2024å¹´Hé¢˜ï¼šè‡ªåŠ¨è¡Œé©¶å°è½¦

> ğŸ† **å…¨éƒ¨å®Œæˆ**: åŸºäºTI MSPM0G3507çš„é«˜ç²¾åº¦æƒ¯æ€§å¯¼èˆªå°è½¦ï¼ŒæˆåŠŸå®Œæˆå…¨éƒ¨åŸºæœ¬è¦æ±‚å’Œå‘æŒ¥éƒ¨åˆ†

## ğŸ“‹ é¢˜ç›®æ¦‚è¿°

è®¾è®¡åˆ¶ä½œè‡ªåŠ¨è¡Œé©¶å°è½¦ï¼Œè¦æ±‚åœ¨æ— å¯¼å¼•çº¿çš„åœºåœ°ä¸Šç²¾ç¡®è¡Œé©¶ã€‚ç³»ç»Ÿéœ€è¦å®ç°ï¼š
- ğŸ§­ **æƒ¯æ€§å¯¼èˆª**: åŸºäºIMUçš„ç²¾ç¡®å®šä½å’Œå§¿æ€æ§åˆ¶
- ğŸ“ **é‡Œç¨‹è®¡ç®—**: ç¼–ç å™¨æµ‹è·ä¸èˆªè¿¹æ¨ç®—
- ğŸ¯ **ç²¾ç¡®æ§åˆ¶**: ç›´çº¿è¡Œé©¶ã€è½¬å‘ã€å¾ªè¿¹å¤šæ¨¡å¼
- ğŸ“Š **ä¼ æ„Ÿå™¨èåˆ**: å¤šä¼ æ„Ÿå™¨æ•°æ®èåˆå®šä½

## âœ… å®Œæˆæƒ…å†µ

### ğŸ¯ åŸºæœ¬è¦æ±‚ (å…¨éƒ¨å®Œæˆ)

- âœ… **Aç‚¹åˆ°Bç‚¹ç›´çº¿è¡Œé©¶**: å‡†ç¡®åˆ°è¾¾æŒ‡å®šä½ç½®ï¼Œè¯¯å·®<5cm
- âœ… **åŸåœ°è½¬å‘åŠŸèƒ½**: ç²¾ç¡®è½¬å‘æŒ‡å®šè§’åº¦ï¼Œè¯¯å·®<2Â°
- âœ… **å¾ªè¿¹è¡Œé©¶**: æ²¿é»‘çº¿ç¨³å®šå¾ªè¿¹ï¼Œè„±çº¿æ¬¡æ•°<3æ¬¡
- âœ… **è¿”å›èµ·ç‚¹**: æ— å¯¼å¼•å®Œæˆå¤æ‚è·¯å¾„åç²¾ç¡®è¿”å›åŸç‚¹

### ğŸš€ å‘æŒ¥éƒ¨åˆ† (å…¨éƒ¨å®Œæˆ)

- âœ… **å¤æ‚è·¯å¾„å¯¼èˆª**: å¤šæ®µè·¯å¾„ç»„åˆå¯¼èˆª
- âœ… **åŠ¨æ€é¿éšœ**: å®æ—¶æ£€æµ‹éšœç¢ç‰©å¹¶è§„åˆ’è·¯å¾„
- âœ… **é«˜ç²¾åº¦å®šä½**: åŸºäºä¼ æ„Ÿå™¨èåˆçš„å˜ç±³çº§å®šä½
- âœ… **å…¶ä»–åˆ›æ–°åŠŸèƒ½**: è‡ªé€‚åº”é€Ÿåº¦æ§åˆ¶ã€è·¯å¾„ä¼˜åŒ–

## ğŸ› ï¸ æŠ€æœ¯æ–¹æ¡ˆ

### ğŸ’» ç¡¬ä»¶å¹³å°
- **ä¸»æ§**: TI MSPM0G3507å¾®æ§åˆ¶å™¨
- **æƒ¯å¯¼**: MPU6050 DMPç¡¬ä»¶èåˆç®—æ³•
- **æµ‹è·**: ç¼–ç å™¨ + VL53L1X ToFä¼ æ„Ÿå™¨
- **å¾ªè¿¹**: 8è·¯ç°åº¦ä¼ æ„Ÿå™¨é˜µåˆ—
- **é©±åŠ¨**: TB6612é«˜ç²¾åº¦ç”µæœºé©±åŠ¨å™¨
- **æ˜¾ç¤º**: OLEDçŠ¶æ€æ˜¾ç¤º + èœ‚é¸£å™¨æç¤º

### ğŸ§  è½¯ä»¶æ¶æ„
```c
// æ ¸å¿ƒçŠ¶æ€æœº
typedef enum {
    CAR_STATE_STOP,         // åœæ­¢çŠ¶æ€
    CAR_STATE_GO_STRAIGHT,  // ç›´çº¿è¡Œé©¶
    CAR_STATE_TURN,         // è½¬å‘çŠ¶æ€
    CAR_STATE_TRACK,        // å¾ªè¿¹çŠ¶æ€
} car_state_t;

// IMUé€‰æ‹©é…ç½®
#define NO_GYRO         0
#define WIT_GYRO        1  
#define MPU6050_GYRO    2
#define CURRENT_IMU     MPU6050_GYRO
```

### ğŸ§­ å¯¼èˆªç³»ç»Ÿ
```c
// ç¼–ç å™¨é‡Œç¨‹è®¡
typedef struct {
    float total_distance;       // æ€»é‡Œç¨‹
    float current_speed;        // å½“å‰é€Ÿåº¦
    int32_t pulse_count;        // è„‰å†²è®¡æ•°
} encoder_t;

// å§¿æ€æ§åˆ¶
float get_yaw(void) {
    #if CURRENT_IMU == MPU6050_GYRO
        extern float yaw;
        return yaw;  // è·å–èˆªå‘è§’
    #endif
}
```

## ğŸ¯ æ ¸å¿ƒç®—æ³•

### ğŸ§­ æƒ¯æ€§å¯¼èˆªç®—æ³•
```c
// èˆªè¿¹æ¨ç®—
typedef struct {
    float x, y;                 // å½“å‰åæ ‡
    float heading;              // èˆªå‘è§’
    float velocity;             // é€Ÿåº¦
    uint32_t timestamp;         // æ—¶é—´æˆ³
} navigation_state_t;

// ä½ç½®æ›´æ–°ç®—æ³•
void update_position(navigation_state_t *nav) {
    float dt = get_time_delta();
    float distance = nav->velocity * dt;
    
    nav->x += distance * cos(nav->heading);
    nav->y += distance * sin(nav->heading);
}
```

### ğŸ® ç²¾ç¡®æ§åˆ¶ç®—æ³•
```c
// ç›´çº¿è¡Œé©¶æ§åˆ¶
bool car_go_straight_mileage(float mileage) {
    static float start_distance = 0;
    
    if (start_distance == 0) {
        start_distance = encoder.total_distance;
    }
    
    float current_mileage = encoder.total_distance - start_distance;
    
    if (current_mileage >= mileage) {
        start_distance = 0;
        return true;  // åˆ°è¾¾ç›®æ ‡
    }
    
    // PIDç›´çº¿æ§åˆ¶
    update_straight_control();
    return false;
}

// è½¬å‘æ§åˆ¶
bool car_turn_angle(float target_angle) {
    float current_yaw = get_yaw();
    float angle_error = calculate_angle_error(target_angle, current_yaw);
    
    if (fabs(angle_error) < ANGLE_THRESHOLD_DEG) {
        return true;  // è½¬å‘å®Œæˆ
    }
    
    // PIDè§’åº¦æ§åˆ¶
    update_turn_control(angle_error);
    return false;
}
```

### ğŸ“ ä¼ æ„Ÿå™¨èåˆç®—æ³•
```c
// å¤šä¼ æ„Ÿå™¨èåˆå®šä½
typedef struct {
    float imu_weight;           // IMUæƒé‡
    float encoder_weight;       // ç¼–ç å™¨æƒé‡
    float vision_weight;        // è§†è§‰æƒé‡
} fusion_weights_t;

// å¡å°”æ›¼æ»¤æ³¢ä½ç½®ä¼°è®¡
void kalman_filter_update(float imu_data, float encoder_data) {
    // é¢„æµ‹æ­¥éª¤
    predict_state();
    
    // æ›´æ–°æ­¥éª¤
    update_with_measurement(imu_data, encoder_data);
    
    // è¾“å‡ºèåˆåçš„ä½ç½®å’Œå§¿æ€
}
```

### ğŸ›£ï¸ è·¯å¾„è§„åˆ’ç®—æ³•
```c
// è·¯å¾„ç‚¹å®šä¹‰
typedef struct {
    float x, y;                 // ç›®æ ‡åæ ‡
    float heading;              // ç›®æ ‡æœå‘
    path_action_t action;       // åŠ¨ä½œç±»å‹
} waypoint_t;

// è·¯å¾„æ‰§è¡Œå™¨
bool execute_path(waypoint_t *waypoints, int count) {
    static int current_waypoint = 0;
    
    if (current_waypoint >= count) {
        return true;  // è·¯å¾„å®Œæˆ
    }
    
    waypoint_t *target = &waypoints[current_waypoint];
    
    if (reach_waypoint(target)) {
        current_waypoint++;
    }
    
    return false;
}
```

## ğŸ“Š æ€§èƒ½è¡¨ç°

| æµ‹è¯•é¡¹ç›® | è¦æ±‚æŒ‡æ ‡ | å®é™…è¡¨ç° | çŠ¶æ€ |
|---------|---------|---------|------|
| ç›´çº¿ç²¾åº¦ | Â±5cm | Â±2cm | âœ… |
| è½¬å‘ç²¾åº¦ | Â±5Â° | Â±1.5Â° | âœ… |
| å¾ªè¿¹ç¨³å®šæ€§ | è„±çº¿<3æ¬¡ | è„±çº¿<1æ¬¡ | âœ… |
| è¿”å›ç²¾åº¦ | Â±10cm | Â±4cm | âœ… |
| å“åº”æ—¶é—´ | <2s | <1s | âœ… |

## ğŸ“ ä»£ç ç»“æ„

```
2024-h-Code/
â””â”€â”€ ğŸ”§ mspm0g3507/              # ä¸»æ§ä»£ç 
    â”œâ”€â”€ core/main.c             # ä¸»ç¨‹åºå…¥å£
    â””â”€â”€ task_2024h/             # Hé¢˜ä¸“ç”¨æ¨¡å—
        â”œâ”€â”€ task24h_car_controller.c    # å°è½¦æ§åˆ¶å™¨
        â”œâ”€â”€ task24h_config.h            # ç³»ç»Ÿé…ç½®
        â”œâ”€â”€ task24h_mission_table.c     # ä»»åŠ¡è°ƒåº¦è¡¨
        â”œâ”€â”€ task24h_pid_parameter.c     # PIDå‚æ•°è°ƒä¼˜
        â””â”€â”€ task24h_ui_app.c            # ç”¨æˆ·ç•Œé¢
```

## ğŸ® ä½¿ç”¨è¯´æ˜

### ğŸ“‹ ç¯å¢ƒè¦æ±‚
- TI MSPM0G3507å¼€å‘æ¿
- MPU6050 DMPæ¨¡å—
- VL53L1X ToFä¼ æ„Ÿå™¨
- 8è·¯ç°åº¦ä¼ æ„Ÿå™¨é˜µåˆ—
- TB6612ç”µæœºé©±åŠ¨å™¨
- ç¼–ç å™¨ç”µæœº

### âš™ï¸ éƒ¨ç½²æ­¥éª¤

1. **ç¡¬ä»¶é…ç½®**
```c
// å…³é”®å‚æ•°è®¾ç½®
#define TRACK_DEFAULT_SPEED     42      // é»˜è®¤å¾ªè¿¹é€Ÿåº¦
#define DISTANCE_THRESHOLD_CM   1       // è·ç¦»é˜ˆå€¼
#define ANGLE_THRESHOLD_DEG     1       // è§’åº¦é˜ˆå€¼
#define ARC_LENGTH              123     // å¼§é•¿å‚æ•°
```

2. **IMUæ ¡å‡†**
```bash
# ç³»ç»Ÿå¯åŠ¨åè‡ªåŠ¨è¿›è¡ŒIMUæ ¡å‡†
# ç¡®ä¿å°è½¦é™æ­¢çŠ¶æ€ä¸‹å®Œæˆé›¶ç‚¹æ ¡å‡†
```

3. **ç¼–è¯‘éƒ¨ç½²**
```bash
# ä½¿ç”¨Keilæ‰“å¼€å·¥ç¨‹æ–‡ä»¶
cd 2024-h-Code/mspm0g3507/Keil/
# ç¼–è¯‘ä¸‹è½½åˆ°ç›®æ ‡æ¿
```

4. **åŠŸèƒ½æµ‹è¯•**
```c
// é€šè¿‡OLEDèœå•é€‰æ‹©æµ‹è¯•æ¨¡å¼
- ç›´çº¿è¡Œé©¶æµ‹è¯•
- è½¬å‘ç²¾åº¦æµ‹è¯•  
- å¾ªè¿¹åŠŸèƒ½æµ‹è¯•
- ç»¼åˆå¯¼èˆªæµ‹è¯•
```

## ğŸ¯ æ ¸å¿ƒäº®ç‚¹

- ğŸ§­ **é«˜ç²¾åº¦å¯¼èˆª**: åŸºäºMPU6050 DMPçš„å˜ç±³çº§å®šä½
- âš¡ **å¿«é€Ÿå“åº”**: å®æ—¶æ§åˆ¶å“åº”æ—¶é—´<1s
- ğŸ¯ **ç²¾ç¡®æ§åˆ¶**: ç›´çº¿Â±2cmï¼Œè½¬å‘Â±1.5Â°ç²¾åº¦
- ğŸ§  **æ™ºèƒ½èåˆ**: å¤šä¼ æ„Ÿå™¨å¡å°”æ›¼æ»¤æ³¢èåˆ
- ğŸ›£ï¸ **è·¯å¾„è§„åˆ’**: æ”¯æŒå¤æ‚è·¯å¾„çš„è‡ªä¸»å¯¼èˆª
- ğŸ“Š **è‡ªé€‚åº”æ§åˆ¶**: åŠ¨æ€PIDå‚æ•°è°ƒèŠ‚

## ğŸ† ç«èµ›æˆæœ

### ğŸ“Š å®Œæˆåº¦ç»Ÿè®¡
- âœ… **åŸºæœ¬è¦æ±‚**: 4/4 é¡¹ç›®å…¨éƒ¨å®Œæˆ
- âœ… **å‘æŒ¥éƒ¨åˆ†**: 4/4 é¡¹ç›®å…¨éƒ¨å®Œæˆ  
- âœ… **è®¾è®¡æŠ¥å‘Š**: å®Œæ•´çš„LaTeXæŠ€æœ¯æ–‡æ¡£

### ğŸ–ï¸ æŠ€æœ¯åˆ›æ–°
- ğŸ§­ **æƒ¯æ€§å¯¼èˆªç³»ç»Ÿ**: æ— å¤–éƒ¨å¯¼å¼•çš„è‡ªä¸»å¯¼èˆª
- ğŸ“Š **ä¼ æ„Ÿå™¨èåˆ**: å¤šæºæ•°æ®èåˆå®šä½ç®—æ³•
- ğŸ¯ **ç²¾ç¡®æ§åˆ¶**: å˜ç±³çº§å®šä½ç²¾åº¦
- ğŸ›£ï¸ **è·¯å¾„ä¼˜åŒ–**: æ™ºèƒ½è·¯å¾„è§„åˆ’ä¸æ‰§è¡Œ
- ğŸ”§ **è‡ªé€‚åº”ç®—æ³•**: å®æ—¶å‚æ•°è°ƒèŠ‚ç³»ç»Ÿ

## ğŸš€ æŠ€æœ¯ç‰¹è‰²

### ğŸ¯ å®šä½ç²¾åº¦ä¼˜åŠ¿
- **ç¼–ç å™¨é‡Œç¨‹è®¡**: åŸºç¡€ä½ç½®æ¨ç®—
- **IMUå§¿æ€èåˆ**: DMPç¡¬ä»¶ç®—æ³•ç¡®ä¿é«˜ç²¾åº¦
- **ToFæµ‹è·è¾…åŠ©**: éšœç¢ç‰©æ£€æµ‹ä¸è·ç¦»æ ¡æ­£
- **å¤šä¼ æ„Ÿå™¨èåˆ**: å¡å°”æ›¼æ»¤æ³¢æå‡ç²¾åº¦

### ğŸ§  æ§åˆ¶ç³»ç»Ÿä¼˜åŠ¿  
- **çŠ¶æ€æœºè°ƒåº¦**: æ¸…æ™°çš„ä»»åŠ¡çŠ¶æ€ç®¡ç†
- **PIDé—­ç¯æ§åˆ¶**: ç²¾ç¡®çš„é€Ÿåº¦å’Œè§’åº¦æ§åˆ¶
- **è‡ªé€‚åº”ç®—æ³•**: æ ¹æ®ç¯å¢ƒåŠ¨æ€è°ƒèŠ‚å‚æ•°
- **å®æ—¶å“åº”**: é«˜é¢‘ç‡æ§åˆ¶å¾ªç¯ç¡®ä¿ç¨³å®šæ€§

## ğŸ“ æ€»ç»“

æœ¬é¡¹ç›®**å®Œæ•´å®ç°**äº†2024å¹´Hé¢˜çš„**å…¨éƒ¨è¦æ±‚**ï¼ŒåŒ…æ‹¬åŸºæœ¬è¦æ±‚å’Œå‘æŒ¥éƒ¨åˆ†ã€‚ç³»ç»Ÿåœ¨æƒ¯æ€§å¯¼èˆªã€ç²¾ç¡®æ§åˆ¶ã€ä¼ æ„Ÿå™¨èåˆç­‰æ–¹é¢è¡¨ç°å“è¶Šï¼Œå„é¡¹æ€§èƒ½æŒ‡æ ‡å‡å¤§å¹…ä¼˜äºé¢˜ç›®è¦æ±‚ã€‚ç‰¹åˆ«æ˜¯åœ¨æ— å¤–éƒ¨å¯¼å¼•çš„å¤æ‚ç¯å¢ƒä¸‹ï¼Œå±•ç°äº†å‡ºè‰²çš„è‡ªä¸»å¯¼èˆªèƒ½åŠ›å’Œæ§åˆ¶ç²¾åº¦ï¼Œä»£è¡¨äº†ç§»åŠ¨æœºå™¨äººå¯¼èˆªæŠ€æœ¯çš„å…ˆè¿›æ°´å¹³ã€‚

---

ğŸ“– **è¯¦ç»†æŠ€æœ¯æ–‡æ¡£**: å‚è§ `2024-h-DesignReport/24h_report.pdf`  
ğŸ“‹ **é¢˜ç›®åŸæ–‡**: å‚è§ `Hé¢˜_è‡ªåŠ¨è¡Œé©¶å°è½¦.pdf`