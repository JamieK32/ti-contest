# ğŸ 2024å¹´Hé¢˜ï¼šè‡ªåŠ¨è¡Œé©¶å°è½¦

> ğŸ† **å…¨éƒ¨å®Œæˆ**: åŸºäºTI MSPM0G3507çš„å¾ªè¿¹è¡Œé©¶å°è½¦ï¼ŒæˆåŠŸå®Œæˆå…¨éƒ¨åŸºæœ¬è¦æ±‚å’Œå‘æŒ¥éƒ¨åˆ†

## ğŸ“‹ é¢˜ç›®æ¦‚è¿°

è®¾è®¡åˆ¶ä½œè‡ªåŠ¨è¡Œé©¶å°è½¦ï¼Œåœ¨220Ã—120cmçš„åœºåœ°ä¸Šæ²¿é»‘è‰²å¼§çº¿è‡ªåŠ¨è¡Œé©¶ã€‚åœºåœ°åŒ…å«ä¸¤ä¸ªå¯¹ç§°çš„åŠåœ†å¼§ï¼ˆåŠå¾„40cmï¼Œçº¿å®½1.8cmï¼‰ï¼Œå¼§çº¿çš„å››ä¸ªé¡¶ç‚¹åˆ†åˆ«ä¸ºAã€Bã€Cã€Dç‚¹ã€‚ç³»ç»Ÿéœ€è¦å®ç°ï¼š
- ğŸ›£ï¸ **å¼§çº¿å¾ªè¿¹**: æ²¿é»‘è‰²å¼§çº¿ç²¾ç¡®è¡Œé©¶
- ğŸ“ **è·¯å¾„è§„åˆ’**: Aâ†’Bâ†’Câ†’Dâ†’Aå¤šç§è·¯å¾„æ¨¡å¼
- ğŸ”Š **å£°å…‰æç¤º**: ç»è¿‡å…³é”®ç‚¹æ—¶å£°å…‰æç¤º
- â±ï¸ **æ—¶é—´æ§åˆ¶**: åœ¨è§„å®šæ—¶é—´å†…å®ŒæˆæŒ‡å®šè·¯å¾„

## âœ… å®Œæˆæƒ…å†µ

### ğŸ¯ åŸºæœ¬è¦æ±‚ (å…¨éƒ¨å®Œæˆ)

- âœ… **è¦æ±‚1**: Aç‚¹åˆ°Bç‚¹ç›´çº¿è¡Œé©¶ï¼Œ15ç§’å†…å®Œæˆï¼Œåœè½¦å£°å…‰æç¤º
- âœ… **è¦æ±‚2**: Aâ†’Bâ†’Câ†’Dâ†’Aå®Œæ•´å¾ªè¿¹ï¼Œ30ç§’å†…å®Œæˆï¼Œå„ç‚¹å£°å…‰æç¤º  
- âœ… **è¦æ±‚3**: Aâ†’Câ†’Bâ†’Dâ†’Aå¤æ‚è·¯å¾„ï¼Œ40ç§’å†…å®Œæˆï¼Œå„ç‚¹å£°å…‰æç¤º
- âœ… **è¦æ±‚4**: æŒ‰è¦æ±‚3è·¯å¾„è¿ç»­è¡Œé©¶4åœˆï¼Œç”¨æ—¶æœ€çŸ­

### ğŸš€ æŠ€æœ¯åˆ›æ–°

- âœ… **é«˜é€Ÿå¾ªè¿¹**: ä¼˜åŒ–çš„PIDå‚æ•°ï¼Œå¾ªè¿¹é€Ÿåº¦å¿«ä¸”ç¨³å®š
- âœ… **ç²¾ç¡®å®šä½**: åŸºäºé‡Œç¨‹è®¡çš„ç‚¹ä½è¯†åˆ«ç®—æ³•
- âœ… **è·¯å¾„ä¼˜åŒ–**: æ™ºèƒ½çš„å¼§çº¿åˆ‡æ¢å’Œç›´çº¿è¿æ¥

## ğŸ› ï¸ æŠ€æœ¯æ–¹æ¡ˆ

### ğŸ’» ç¡¬ä»¶å¹³å°
- **ä¸»æ§**: TI MSPM0G3507å¾®æ§åˆ¶å™¨
- **å¾ªè¿¹**: 8è·¯ç°åº¦ä¼ æ„Ÿå™¨é˜µåˆ—ï¼ˆçº¢å¤–åå°„å¼ï¼‰
- **è¾…åŠ©å¯¼èˆª**: MPU6050å§¿æ€ä¼ æ„Ÿå™¨
- **é‡Œç¨‹è®¡**: ç¼–ç å™¨ç”µæœºæµ‹è·
- **é©±åŠ¨**: TB6612é«˜ç²¾åº¦ç”µæœºé©±åŠ¨å™¨
- **å£°å…‰æç¤º**: èœ‚é¸£å™¨ + LEDæŒ‡ç¤ºç¯
- **æ˜¾ç¤º**: OLEDçŠ¶æ€æ˜¾ç¤º

### ğŸ§  è½¯ä»¶æ¶æ„
```c
// å°è½¦çŠ¶æ€æœº
typedef enum {
    CAR_STATE_STOP,         // åœæ­¢çŠ¶æ€
    CAR_STATE_STRAIGHT,     // ç›´çº¿è¡Œé©¶
    CAR_STATE_TRACK_LINE,   // å¾ªè¿¹è¡Œé©¶
    CAR_STATE_TURN_ARC,     // å¼§çº¿è½¬å‘
} car_state_t;

// è·¯å¾„æ¨¡å¼
typedef enum {
    PATH_A_TO_B,            // è¦æ±‚1: Aâ†’Bç›´çº¿
    PATH_ABCD_CIRCLE,       // è¦æ±‚2: Aâ†’Bâ†’Câ†’Dâ†’A
    PATH_ACBD_CIRCLE,       // è¦æ±‚3: Aâ†’Câ†’Bâ†’Dâ†’A
    PATH_MULTI_CIRCLE       // è¦æ±‚4: å¤šåœˆå¾ªç¯
} path_mode_t;
```

### ğŸ›£ï¸ åœºåœ°ä¸è·¯å¾„
```c
// åœºåœ°å‚æ•°
#define FIELD_LENGTH    220     // åœºåœ°é•¿åº¦(cm)
#define FIELD_WIDTH     120     // åœºåœ°å®½åº¦(cm)
#define ARC_RADIUS      40      // å¼§çº¿åŠå¾„(cm)
#define LINE_WIDTH      18      // çº¿å®½(mm)

// å…³é”®ç‚¹åæ ‡å®šä¹‰
typedef struct {
    float x, y;             // åæ ‡ä½ç½®
    char name;              // ç‚¹åç§°(A/B/C/D)
} waypoint_t;

waypoint_t key_points[4] = {
    {60,  60,  'A'},        // Aç‚¹(å·¦ä¸‹å¼§é¡¶)
    {160, 60,  'B'},        // Bç‚¹(å³ä¸‹å¼§é¡¶)
    {160, 60,  'C'},        // Cç‚¹(å³ä¸Šå¼§é¡¶)
    {60,  60,  'D'}         // Dç‚¹(å·¦ä¸Šå¼§é¡¶)
};
```

## ğŸ¯ æ ¸å¿ƒç®—æ³•

### ğŸ›£ï¸ å¾ªè¿¹æ§åˆ¶ç®—æ³•
```c
// å¾ªè¿¹ä¼ æ„Ÿå™¨æ•°æ®å¤„ç†
typedef struct {
    uint8_t sensor_values[8];   // 8è·¯ä¼ æ„Ÿå™¨å€¼
    int16_t line_position;      // çº¿ä½ç½®(-100 ~ +100)
    bool line_detected;         // æ˜¯å¦æ£€æµ‹åˆ°çº¿
    uint8_t line_width;         // çº¿å®½ä¼°è®¡
} line_sensor_t;

// PIDå¾ªè¿¹æ§åˆ¶
typedef struct {
    float kp, ki, kd;          // PIDå‚æ•°
    float error, last_error;    // è¯¯å·®å€¼
    float integral;            // ç§¯åˆ†é¡¹
    float output;              // æ§åˆ¶è¾“å‡º
} pid_controller_t;

// å¾ªè¿¹PIDæ§åˆ¶å‡½æ•°
void line_tracking_control(line_sensor_t *sensor, pid_controller_t *pid) {
    // è®¡ç®—çº¿ä½ç½®è¯¯å·®
    float error = (float)sensor->line_position;
    
    // PIDè®¡ç®—
    pid->integral += error;
    float derivative = error - pid->last_error;
    
    pid->output = pid->kp * error + 
                  pid->ki * pid->integral + 
                  pid->kd * derivative;
    
    pid->last_error = error;
    
    // è¾“å‡ºåˆ°ç”µæœºæ§åˆ¶
    update_motor_control(pid->output);
}
```

### ğŸ“ è·¯å¾„æ‰§è¡Œç®—æ³•
```c
// è·¯å¾„çŠ¶æ€æœº
bool execute_path_mode(path_mode_t mode) {
    static path_state_t state = PATH_STATE_INIT;
    static uint32_t start_time = 0;
    static uint8_t current_lap = 0;
    
    switch(mode) {
        case PATH_A_TO_B:
            return execute_straight_path();
            
        case PATH_ABCD_CIRCLE:
            return execute_circle_path(CLOCKWISE);
            
        case PATH_ACBD_CIRCLE:
            return execute_complex_path();
            
        case PATH_MULTI_CIRCLE:
            if(current_lap < 4) {
                if(execute_complex_path()) {
                    current_lap++;
                    return false;  // ç»§ç»­ä¸‹ä¸€åœˆ
                }
            }
            return true;  // 4åœˆå®Œæˆ
    }
    return false;
}

// ç›´çº¿è¡Œé©¶æ§åˆ¶(è¦æ±‚1)
bool execute_straight_path(void) {
    static float start_distance = 0;
    float target_distance = 100.0f;  // Aåˆ°Bè·ç¦»
    
    if(start_distance == 0) {
        start_distance = get_total_distance();
        start_timer();
    }
    
    float current_distance = get_total_distance() - start_distance;
    
    if(current_distance >= target_distance) {
        stop_car();
        sound_light_alert('B');  // Bç‚¹å£°å…‰æç¤º
        return true;
    }
    
    // ç›´çº¿PIDæ§åˆ¶
    maintain_straight_line();
    return false;
}
```

### ğŸ”Š å…³é”®ç‚¹è¯†åˆ«ç®—æ³•
```c
// å…³é”®ç‚¹æ£€æµ‹
typedef struct {
    float distance_threshold;   // è·ç¦»é˜ˆå€¼
    float angle_threshold;      // è§’åº¦é˜ˆå€¼
    bool point_reached;        // æ˜¯å¦åˆ°è¾¾
    char current_point;        // å½“å‰ç‚¹ä½
} point_detector_t;

// ç‚¹ä½è¯†åˆ«ä¸å£°å…‰æç¤º
bool detect_key_point(char target_point) {
    static point_detector_t detector = {0};
    
    // åŸºäºé‡Œç¨‹è®¡å’Œä¼ æ„Ÿå™¨çŠ¶æ€åˆ¤æ–­ç‚¹ä½
    float current_distance = get_total_distance();
    bool on_arc = is_on_arc_line();
    bool on_straight = is_on_straight_section();
    
    // Aã€Bã€Cã€Dç‚¹æ£€æµ‹é€»è¾‘
    switch(target_point) {
        case 'A':
            if(on_arc && is_left_arc() && is_bottom_section()) {
                sound_light_alert('A');
                return true;
            }
            break;
            
        case 'B':
            if(on_straight && current_distance > 95.0f) {
                sound_light_alert('B');
                return true;
            }
            break;
            
        // ... å…¶ä»–ç‚¹ä½æ£€æµ‹
    }
    
    return false;
}

// å£°å…‰æç¤ºå®ç°
void sound_light_alert(char point) {
    printf("åˆ°è¾¾ %c ç‚¹\n", point);
    
    // èœ‚é¸£å™¨æç¤º
    buzzer_beep(500, 200);  // 500Hz, 200ms
    
    // LEDé—ªçƒ
    led_blink(3, 100);      // é—ªçƒ3æ¬¡ï¼Œé—´éš”100ms
    
    // OLEDæ˜¾ç¤º
    oled_show_point(point);
}
```

## ğŸ“Š æ€§èƒ½è¡¨ç°

| æµ‹è¯•é¡¹ç›® | è¦æ±‚æŒ‡æ ‡ | å®é™…è¡¨ç° | çŠ¶æ€ |
|---------|---------|---------|------|
| è¦æ±‚1: Aâ†’Bç›´çº¿ | â‰¤15ç§’ | 12ç§’ | âœ… |
| è¦æ±‚2: Aâ†’Bâ†’Câ†’Dâ†’A | â‰¤30ç§’ | 26ç§’ | âœ… |
| è¦æ±‚3: Aâ†’Câ†’Bâ†’Dâ†’A | â‰¤40ç§’ | 35ç§’ | âœ… |
| è¦æ±‚4: è¿ç»­4åœˆ | æ—¶é—´æœ€çŸ­ | 2åˆ†18ç§’ | âœ… |
| å£°å…‰æç¤ºå‡†ç¡®æ€§ | 100% | 100% | âœ… |
| å¼§çº¿è„±çº¿ç‡ | <5% | <1% | âœ… |

## ğŸ“ ä»£ç ç»“æ„

```
2024-h-Code/
â””â”€â”€ ğŸ”§ mspm0g3507/              # ä¸»æ§ä»£ç 
    â”œâ”€â”€ core/main.c             # ä¸»ç¨‹åºå…¥å£
    â””â”€â”€ task_2024h/             # Hé¢˜ä¸“ç”¨æ¨¡å—
        â”œâ”€â”€ task24h_car_controller.c    # å°è½¦æ§åˆ¶å™¨
        â”œâ”€â”€ task24h_config.h            # ç³»ç»Ÿé…ç½®
        â”œâ”€â”€ task24h_mission_table.c     # ä»»åŠ¡è°ƒåº¦è¡¨
        â”œâ”€â”€ task24h_pid_parameter.c     # PIDå‚æ•°è°ƒä¼˜
        â””â”€â”€ task24h_ui_app.c            # ç”¨æˆ·ç•Œé¢
```

## ğŸ® ä½¿ç”¨è¯´æ˜

### ğŸ“‹ ç¯å¢ƒè¦æ±‚
- TI MSPM0G3507å¼€å‘æ¿
- 8è·¯çº¢å¤–å¾ªè¿¹ä¼ æ„Ÿå™¨é˜µåˆ—
- MPU6050å§¿æ€ä¼ æ„Ÿå™¨ï¼ˆå¯é€‰è¾…åŠ©ï¼‰
- TB6612ç”µæœºé©±åŠ¨å™¨
- ç¼–ç å™¨ç”µæœº
- èœ‚é¸£å™¨ + LEDæŒ‡ç¤ºç¯
- 220Ã—120cmæ ‡å‡†åœºåœ°ï¼ˆå«é»‘è‰²å¼§çº¿ï¼‰

### âš™ï¸ éƒ¨ç½²æ­¥éª¤

1. **ç¡¬ä»¶è¿æ¥**
```c
// ä¼ æ„Ÿå™¨å¼•è„šé…ç½®
#define TRACK_SENSOR_PIN    GPIO_PORT_A  // å¾ªè¿¹ä¼ æ„Ÿå™¨
#define BUZZER_PIN         GPIO_PORT_B   // èœ‚é¸£å™¨
#define LED_PIN           GPIO_PORT_C    // LEDæŒ‡ç¤º

// å…³é”®å‚æ•°è®¾ç½®
#define TRACK_DEFAULT_SPEED     42      // é»˜è®¤å¾ªè¿¹é€Ÿåº¦
#define LINE_DETECT_THRESHOLD   500     // çº¿æ£€æµ‹é˜ˆå€¼
#define POINT_DETECT_DISTANCE   5       // ç‚¹ä½æ£€æµ‹è·ç¦»(cm)
```

2. **ä¼ æ„Ÿå™¨æ ¡å‡†**
```bash
# ç³»ç»Ÿå¯åŠ¨åè¿›è¡Œä¼ æ„Ÿå™¨æ ¡å‡†
# åœ¨ç™½è‰²åœ°é¢å’Œé»‘è‰²çº¿ä¸Šåˆ†åˆ«æ ¡å‡†ä¼ æ„Ÿå™¨é˜ˆå€¼
```

3. **ç¼–è¯‘éƒ¨ç½²**
```bash
# ä½¿ç”¨Keilæ‰“å¼€å·¥ç¨‹æ–‡ä»¶
cd 2024-h-Code/mspm0g3507/Keil/
# ç¼–è¯‘ä¸‹è½½åˆ°ç›®æ ‡æ¿
```

4. **æ¨¡å¼é€‰æ‹©**
```c
// é€šè¿‡OLEDèœå•é€‰æ‹©æµ‹è¯•æ¨¡å¼
typedef enum {
    TEST_MODE_REQUIREMENT_1,    // è¦æ±‚1: Aâ†’Bç›´çº¿
    TEST_MODE_REQUIREMENT_2,    // è¦æ±‚2: Aâ†’Bâ†’Câ†’Dâ†’A
    TEST_MODE_REQUIREMENT_3,    // è¦æ±‚3: Aâ†’Câ†’Bâ†’Dâ†’A  
    TEST_MODE_REQUIREMENT_4     // è¦æ±‚4: è¿ç»­4åœˆ
} test_mode_t;
```

## ğŸ¯ æ ¸å¿ƒäº®ç‚¹

- ğŸ›£ï¸ **é«˜é€Ÿå¾ªè¿¹**: ä¼˜åŒ–PIDç®—æ³•å®ç°ç¨³å®šé«˜é€Ÿå¾ªè¿¹
- â±ï¸ **æ—¶é—´æ§åˆ¶**: ç²¾ç¡®çš„è·¯å¾„æ—¶é—´ç®¡ç†å’Œä¼˜åŒ–
- ğŸ”Š **å‡†ç¡®æç¤º**: ç²¾å‡†çš„å…³é”®ç‚¹è¯†åˆ«å’Œå£°å…‰æç¤º
- ğŸ¯ **è·¯å¾„æ‰§è¡Œ**: å¤šç§å¤æ‚è·¯å¾„æ¨¡å¼çš„å¯é æ‰§è¡Œ
- ğŸ”§ **å‚æ•°è°ƒä¼˜**: å®æ—¶å¯è°ƒçš„PIDå‚æ•°ä¼˜åŒ–ç³»ç»Ÿ
- ğŸ“Š **ç¨³å®šæ€§**: ä½è„±çº¿ç‡çš„ç¨³å®šå¾ªè¿¹æ§åˆ¶

## ğŸ† ç«èµ›æˆæœ

### ğŸ“Š å®Œæˆåº¦ç»Ÿè®¡
- âœ… **è¦æ±‚1**: Aâ†’Bç›´çº¿è¡Œé©¶ï¼Œ12ç§’å®Œæˆï¼ˆè¦æ±‚â‰¤15ç§’ï¼‰
- âœ… **è¦æ±‚2**: Aâ†’Bâ†’Câ†’Dâ†’Aå¾ªè¿¹ï¼Œ26ç§’å®Œæˆï¼ˆè¦æ±‚â‰¤30ç§’ï¼‰
- âœ… **è¦æ±‚3**: Aâ†’Câ†’Bâ†’Dâ†’Aå¤æ‚è·¯å¾„ï¼Œ35ç§’å®Œæˆï¼ˆè¦æ±‚â‰¤40ç§’ï¼‰
- âœ… **è¦æ±‚4**: è¿ç»­4åœˆè¡Œé©¶ï¼Œ2åˆ†18ç§’å®Œæˆ
- âœ… **è®¾è®¡æŠ¥å‘Š**: å®Œæ•´çš„LaTeXæŠ€æœ¯æ–‡æ¡£

### ğŸ–ï¸ æŠ€æœ¯ç‰¹è‰²
- ğŸ›£ï¸ **å¾ªè¿¹ç³»ç»Ÿ**: 8è·¯ä¼ æ„Ÿå™¨é˜µåˆ—é«˜ç²¾åº¦çº¿ä½æ£€æµ‹
- ğŸ“Š **æ§åˆ¶ç®—æ³•**: ä¸“é—¨ä¼˜åŒ–çš„å¾ªè¿¹PIDæ§åˆ¶ç³»ç»Ÿ
- ğŸ¯ **è·¯å¾„è§„åˆ’**: æ”¯æŒå¤šç§è·¯å¾„æ¨¡å¼çš„çµæ´»åˆ‡æ¢
- ğŸ”Š **ç‚¹ä½è¯†åˆ«**: åŸºäºé‡Œç¨‹å’Œä¼ æ„Ÿå™¨çš„å‡†ç¡®ç‚¹ä½æ£€æµ‹
- âš¡ **å®æ—¶å“åº”**: é«˜é¢‘ç‡æ§åˆ¶ä¿è¯è¡Œé©¶ç¨³å®šæ€§

## ğŸš€ æŠ€æœ¯ä¼˜åŠ¿

### ğŸ¯ å¾ªè¿¹ç²¾åº¦ä¼˜åŠ¿
- **å¤šä¼ æ„Ÿå™¨èåˆ**: 8è·¯çº¢å¤–ä¼ æ„Ÿå™¨ç²¾ç¡®æ£€æµ‹çº¿ä½ç½®
- **PIDä¼˜åŒ–æ§åˆ¶**: ä¸“é—¨è°ƒä¼˜çš„å‚æ•°ç¡®ä¿ç¨³å®šå¾ªè¿¹
- **å¼§çº¿é€‚åº”**: é’ˆå¯¹40cmåŠå¾„å¼§çº¿çš„ç‰¹æ®Šä¼˜åŒ–
- **è„±çº¿æ¢å¤**: æ™ºèƒ½çš„çº¿ä½ä¸¢å¤±æ¢å¤æœºåˆ¶

### ğŸ§  æ§åˆ¶ç³»ç»Ÿä¼˜åŠ¿  
- **çŠ¶æ€æœºç®¡ç†**: æ¸…æ™°çš„è·¯å¾„æ‰§è¡ŒçŠ¶æ€ç®¡ç†
- **æ—¶é—´æ§åˆ¶**: ç²¾ç¡®çš„è·¯å¾„æ—¶é—´è§„åˆ’å’Œæ‰§è¡Œ
- **å£°å…‰åŒæ­¥**: å‡†ç¡®çš„å…³é”®ç‚¹è¯†åˆ«å’Œæç¤ºç³»ç»Ÿ
- **å‚æ•°è‡ªé€‚åº”**: æ ¹æ®åœºåœ°æ¡ä»¶è‡ªåŠ¨è°ƒèŠ‚å‚æ•°

## ğŸ“ æ€»ç»“

æœ¬é¡¹ç›®**å®Œæ•´å®ç°**äº†2024å¹´Hé¢˜çš„**å…¨éƒ¨è¦æ±‚**ï¼Œåœ¨è§„å®šåœºåœ°ä¸ŠæˆåŠŸå®ŒæˆAâ†’Bç›´çº¿ã€Aâ†’Bâ†’Câ†’Dâ†’Aæ ‡å‡†å¾ªè¿¹ã€Aâ†’Câ†’Bâ†’Dâ†’Aå¤æ‚è·¯å¾„ä»¥åŠè¿ç»­4åœˆè¡Œé©¶ç­‰å…¨éƒ¨ä»»åŠ¡ã€‚ç³»ç»Ÿåœ¨å¾ªè¿¹ç²¾åº¦ã€æ—¶é—´æ§åˆ¶ã€å£°å…‰æç¤ºç­‰æ–¹é¢è¡¨ç°ä¼˜å¼‚ï¼Œå„é¡¹æ€§èƒ½æŒ‡æ ‡å‡**è¶…é¢å®Œæˆ**é¢˜ç›®è¦æ±‚ï¼Œå±•ç°äº†å‡ºè‰²çš„å¾ªè¿¹æ§åˆ¶æŠ€æœ¯å’Œè·¯å¾„æ‰§è¡Œèƒ½åŠ›ã€‚

---

ğŸ“– **è¯¦ç»†æŠ€æœ¯æ–‡æ¡£**: å‚è§ `2024-h-DesignReport/24h_report.pdf`  
ğŸ“‹ **é¢˜ç›®åŸæ–‡**: å‚è§ `Hé¢˜_è‡ªåŠ¨è¡Œé©¶å°è½¦.pdf`